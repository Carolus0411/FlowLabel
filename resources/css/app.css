@import url("https://fonts.bunny.net/css?family=inter:100,200,300,400,500,600,700");
@import "tailwindcss";

@theme {
    --font-inter:
        "Inter", ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji",
        "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
}

/* daisyUI */
@plugin "daisyui" {
    themes:
        light --default,
        dark --prefersdark;
}

/* maryUI */
@source "../../vendor/robsontenorio/mary/src/View/Components/**/*.php";
@source "../../app/View/Components/**/**/*.php";
@source "../../app/Livewire/**/**/*.php";
@source "../../app/Enums/**/*.php";

/* Dark theme variant support */
@custom-variant dark (&:where(.dark, .dark *));

/* Laravel 12 defaults */
@source "../../vendor/laravel/framework/src/Illuminate/Pagination/resources/views/*.blade.php";
@source "../../storage/framework/views/*.php";
@source "../**/*.blade.php";
@source "../**/*.js";

x-cloak {
    display: hidden;
}

/* Your styles goes here ... */

/* custom form outline */
.input,
.select,
.textarea {
    &:focus,
    &:focus-within {
        @apply !outline-offset-0 !outline-1;
    }
}

.input:has(:read-only),
.textarea:has(:read-only) {
    @apply !border-solid !bg-base-200;
}

.input:has(:disabled),
.textarea:has(:disabled),
.select:has(:disabled) {
    @apply !border-solid border-zinc-300 dark:border-zinc-600 bg-base-200 text-gray-800 dark:text-gray-100;
}

/* fix scrollbar flickering on chromium family */
:root {
    scrollbar-color: #aeaeaf #0000 !important;
}

:root {
    &:where(.dark, .dark *) {
        scrollbar-color: #656e74 #0000 !important;
    }
}

.table thead th,
.table tfoot th {
    @apply !text-xs;
}

.table {
    @apply !static;
}

.table details.dropdown {
    @apply !static;
}

/* mary pagination */
.mary-table-pagination {
    button,
    span {
        @apply text-sm;
    }

    button {
        @apply cursor-pointer;
    }

    button:hover {
        @apply bg-gray-100;
    }

    span[aria-current="page"] > span {
        @apply bg-base-content/10;
    }

    button,
    span[aria-current="page"] > span,
    span[aria-disabled="true"] span {
        @apply py-1 px-2;
    }
}

/* EasyMDE */

.EasyMDEContainer .CodeMirror * {
    @apply text-sm;
}
&:where(.dark, .dark *) {
    .EasyMDEContainer .editor-toolbar {
        @apply border-gray-600;
    }

    .EasyMDEContainer .CodeMirror {
        @apply bg-base-100 text-base-content border-gray-600;
    }

    .EasyMDEContainer .CodeMirror-cursor {
        @apply border border-b-base-100;
    }

    .EasyMDEContainer .editor-toolbar > button:hover,
    .EasyMDEContainer .editor-toolbar > .active {
        @apply bg-base-100 text-base-content;
    }
}

.filepond--credits {
    display: none;
}

/* Fix mobile drawer sidebar positioning and z-index layering */
@media (max-width: 1023px) {
    /* Drawer sidebar - MAXIMUM z-index with pointer-events enabled */
    .drawer-side {
        position: fixed !important;
        top: 65px !important;
        left: 0 !important;
        width: 280px !important;
        height: calc(100vh - 65px) !important;
        z-index: 99999 !important; /* MAXIMUM priority */
        transition: transform 0.3s ease;
        pointer-events: auto !important; /* Enable clicks */
        overflow-y: auto !important;
        overflow-x: hidden !important;
    }
    
    /* All children of drawer-side */
    .drawer-side > *,
    .drawer-side > * > * {
        pointer-events: auto !important;
    }
    
    /* Ensure all sidebar content is clickable - FORCE */
    .drawer-side *,
    .drawer-side ul,
    .drawer-side li,
    .drawer-side div {
        pointer-events: auto !important;
    }
    
    /* Menu and menu items - CRITICAL */
    .drawer-side .menu,
    .drawer-side .menu *,
    .drawer-side .menu li,
    .drawer-side .menu li *,
    .drawer-side .menu a,
    .drawer-side .menu button {
        pointer-events: auto !important;
        cursor: pointer !important;
    }
    
    /* All interactive elements in sidebar - FORCE CLICKABLE */
    .drawer-side button,
    .drawer-side a,
    .drawer-side [role="button"],
    .drawer-side input,
    .drawer-side select,
    .drawer-side textarea,
    .drawer-side label {
        pointer-events: auto !important;
        cursor: pointer !important;
        position: relative;
        z-index: 1;
    }
    
    /* Backdrop/overlay - MUST be below sidebar */
    .drawer-overlay {
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        width: 100% !important;
        height: 100% !important;
        z-index: 9998 !important; /* BELOW sidebar */
        background: rgba(0, 0, 0, 0.5) !important;
        pointer-events: auto !important;
    }
    
    /* Ensure navbar stays below sidebar and overlay */
    #nav {
        z-index: 9000 !important;
    }
    
    /* Main content - normal z-index */
    .drawer-content {
        z-index: 1 !important;
        pointer-events: auto !important; /* Keep enabled */
    }
    
    /* Remove any blocking pseudo-elements */
    .drawer-side::before,
    .drawer-side::after,
    .drawer-overlay::before,
    .drawer-overlay::after {
        content: none !important;
        display: none !important;
    }
    
    /* Force menu items to be visible and clickable */
    .drawer-side [class*="menu-item"],
    .drawer-side [class*="menu-sub"] {
        pointer-events: auto !important;
    }
    
    /* Livewire navigate links */
    .drawer-side a[href] {
        pointer-events: auto !important;
        cursor: pointer !important;
        display: block !important;
    }
}

/* Desktop view - reset everything */
@media (min-width: 1024px) {
    .drawer-side {
        z-index: auto;
        pointer-events: auto;
        position: relative;
        top: auto;
        left: auto;
        width: auto;
        height: auto;
    }
    
    #nav {
        z-index: 50;
    }
    
    .drawer-content {
        pointer-events: auto;
    }
    
    .drawer-overlay {
        display: none;
    }
}
